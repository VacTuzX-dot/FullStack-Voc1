import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.WFquGv8Z.js";import{c as y}from"./Card.C6sQ4zNV.js";function E({pathname:r="/"}){const[o,c]=n.useState(null),[i,m]=n.useState(!0),[d,p]=n.useState(!1),[a,f]=n.useState(""),[j,l]=n.useState(!1),N=s=>r===s;n.useEffect(()=>{p(!0);const s=localStorage.getItem("token");c(s)},[]);const b=()=>{d&&(localStorage.removeItem("token"),c(null),window.location.href="/signin")},v=()=>m(!i),w=()=>m(!0),h=s=>{const t=s.target.value;f(t),l(t.length>0)},x=s=>{s.preventDefault(),a.trim()&&(window.location.href=`/?search=${encodeURIComponent(a.trim())}`)},u=y.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())||s.text.toLowerCase().includes(a.toLowerCase())),g=[{href:"/",icon:"bi-house",label:"Home"},{href:"/about",icon:"bi-info-circle",label:"About"},{href:"/service",icon:"bi-gear",label:"Services"},{href:"/contact",icon:"bi-envelope",label:"Contact"}];return d?e.jsx("nav",{className:"navbar navbar-expand-lg bg-white border-bottom sticky-top",children:e.jsxs("div",{className:"container",children:[e.jsxs("a",{href:"/",className:"navbar-brand fw-bold text-primary d-flex align-items-center",children:[e.jsx("img",{src:"/images/logo.png",alt:"อินEar Logo",style:{width:"36px",height:"36px",objectFit:"contain",marginRight:"8px"}}),"อินEar"]}),e.jsxs("form",{className:"d-none d-lg-flex mx-auto position-relative",style:{width:"300px"},onSubmit:x,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"search",className:"form-control border-end-0",placeholder:"ค้นหา IEM...",value:a,onChange:h,onFocus:()=>l(a.length>0),onBlur:()=>setTimeout(()=>l(!1),200)}),e.jsx("button",{type:"submit",className:"btn btn-outline-secondary border-start-0",children:e.jsx("i",{className:"bi bi-search"})})]}),j&&e.jsx("div",{className:"position-absolute top-100 start-0 w-100 bg-white border rounded-3 shadow-lg mt-1",style:{zIndex:1050,maxHeight:"300px",overflowY:"auto"},children:u.length>0?u.map(s=>e.jsxs("a",{href:`/?search=${encodeURIComponent(s.title)}`,className:"d-flex align-items-center gap-3 p-2 text-decoration-none text-dark border-bottom",style:{transition:"background 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="#f8f9fa",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:[e.jsx("img",{src:s.image,alt:s.title,style:{width:40,height:40,objectFit:"cover",borderRadius:4}}),e.jsx("div",{children:e.jsx("div",{className:"fw-medium small",children:s.title})})]},s.id)):e.jsxs("div",{className:"p-3 text-center text-muted small",children:[e.jsx("i",{className:"bi bi-emoji-frown me-2"}),"ไม่พบผลลัพธ์"]})})]}),e.jsxs("div",{className:"d-lg-none d-flex align-items-center gap-2",children:[o?e.jsx("button",{onClick:b,className:"btn btn-sm btn-outline-danger",children:e.jsx("i",{className:"bi bi-box-arrow-right"})}):r==="/signin"?e.jsx("a",{href:"/signup",className:"btn btn-sm btn-primary",children:e.jsx("i",{className:"bi bi-person-plus"})}):e.jsx("a",{href:"/signin",className:"btn btn-sm btn-primary",children:e.jsx("i",{className:"bi bi-person"})}),e.jsx("button",{className:"navbar-toggler border-0",onClick:v,children:e.jsx("i",{className:`bi ${i?"bi-list":"bi-x"} fs-4`})})]}),e.jsxs("div",{className:`collapse navbar-collapse ${i?"":"show"}`,children:[e.jsx("form",{className:"d-lg-none my-3",onSubmit:x,children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"search",className:"form-control",placeholder:"ค้นหา IEM...",value:a,onChange:h}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsx("ul",{className:"navbar-nav ms-auto gap-1",children:g.map(s=>e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:s.href,className:`nav-link px-3 py-2 rounded ${N(s.href)?"bg-primary text-white":""}`,onClick:w,children:[e.jsx("i",{className:`bi ${s.icon} me-2`}),s.label]})},s.href))}),e.jsx("div",{className:"d-none d-lg-flex ms-3",children:o?e.jsxs("button",{onClick:b,className:"btn btn-outline-danger btn-sm",children:[e.jsx("i",{className:"bi bi-box-arrow-right me-1"}),"Sign Out"]}):r==="/signin"?e.jsxs("a",{href:"/signup",className:"btn btn-primary btn-sm",children:[e.jsx("i",{className:"bi bi-person-plus me-1"}),"Sign Up"]}):e.jsxs("a",{href:"/signin",className:"btn btn-primary btn-sm",children:[e.jsx("i",{className:"bi bi-person me-1"}),"Sign In"]})})]})]})}):e.jsx("nav",{className:"navbar navbar-expand-lg bg-white border-bottom sticky-top",children:e.jsxs("div",{className:"container",children:[e.jsxs("a",{href:"/",className:"navbar-brand fw-bold d-flex align-items-center",children:[e.jsx("img",{src:"/images/logo.png",alt:"อินEar Logo",style:{width:"36px",height:"36px",objectFit:"contain",marginRight:"8px"}}),"อินEar"]}),e.jsx("div",{className:"d-none d-lg-flex gap-3",children:g.map(s=>e.jsx("a",{href:s.href,className:"nav-link",children:s.label},s.href))})]})})}export{E as default};
